import statistics
from operator import itemgetter
import numpy as np
import matplotlib.pyplot as plt
import glob
import seaborn as sns
import pickle
from dateutil import parser
import pandas as pd
from scipy.stats import lognorm
from scipy.stats import alpha
from scipy.stats import fisk
from scipy.stats import genextreme
from scipy.stats import gengamma
from scipy.stats import loglaplace
from scipy.stats import burr
from scipy.stats import maxwell
from scipy.stats import mielke
from scipy.stats import moyal
from scipy.stats import nakagami
from scipy.stats import norminvgauss
from scipy.stats import powerlognorm
from scipy.stats import wald
from scipy.stats import cauchy
from mpl_toolkits import mplot3d
from matplotlib.lines import Line2D


#col_list = ['computation time', 'checkpoint time', 'waste time', 'restart time', 'wallclock time', 'efficiency',
#             'no. of failures', 'no. of checkpoints', 'checkpoint interval', 'pct. of checkpoints to BB', 'daily write workloads to Burst Buffers']


base_simulation_data_no_bb_100 = [
[8.199564260536354,12.334730061994925,0.4944791417624491,94.50885240393637,15.818,261.241,1.4376208519131402,0.0],
[2.381654138887644,3.1168223138045423,0.05880369444441371,97.74610336725334,7.033,284.849,0.8790946912498985,0.0],
[0.5470957095720576,0.6595860165949563,0.0029663366336692408,99.49968822920935,2.247,414.425,0.604663411725994,0.0],
[0.0396971539518431,0.04403374049992232,2.9975251749923466e-05,99.93041840434555,0.281,372.137,0.33676145907977906,0.0],
[0.16159490214709107,0.22544780034437503,0.0001483476106384168,99.91947546724354,1.087,1184.068,0.4273387170264755,0.0],
[0.09927503193457657,0.20244970701497517,5.135624999316146e-05,99.95813354604489,0.891,1722.362,0.45215079380091233,0.0]]


base_simulation_data_100 = [[11.66334334776059,22.27970177855433,0.35048017820480626,91.34025287404243,24.392,309.93,1.1917206930958053,12096.088965243478],
[3.850918801029999,5.406087261961279,0.056329795346651605,96.27861466925067,11.293,294.776,0.8360953565575328,4152.060573635537],
[1.4172102329621803,1.791977080827532,0.007763425767250589,98.68219992550961,3.843,267.86,0.9208692891823053,520.5987262626995],
[0.07086778699236125,0.08378470087181104,4.0166834687451584e-05,99.8715933336118,0.508,342.217,0.36071208366649493,13.147690451118716],
[0.18897506081349869,0.25179545236673395,7.64340073899965e-05,99.90829603731854,1.859,1754.906,0.28375550112558623,8.778098396131735],
[0.045078102758853586,0.07918580906827347,1.2154279080843988e-05,99.98274537817224,1.416,6660.697,0.11524480671938822,0.7097806223545494]]


ckpt_simulation_data_150 = [
[11.620668449053287,22.23440767846169,0.4217855193000093,91.34565217353344,27.671,308.989,1.191486756327706,12038.525496272836],
[3.8458892065637063,5.141717796074913,0.07114704084469137,96.37612527789334,11.596,294.918,0.8366337132956172,4147.518055261535],
[1.40890357998766,0.4108389920233102,0.0252222595253603,99.23904205728448,3.849,269.226,0.9213988210080061,520.2580906173331],
[0.0710274490306938,0.015587548642977895,0.00014748289249091266,99.92788459453719,0.538,343.434,0.35949300006497104,13.184782300197032],
[0.18885456256855346,0.042152813987334344,0.0003421698074164296,99.95184778877261,1.808,1755.292,0.28390025630077637,8.77632060209229],
[0.045080660978080334,0.012534624777465217,5.600536115152366e-05,99.99199177919526,1.438,6662.292,0.11523249692253053,0.7098871109966854]
]

ckpt_simulation_data_140 = [
[11.607045597790442,22.081895942580925,0.42302136216948794,91.38259745095272,27.498,308.653,1.192943386669169,12027.292869405226],
[3.8476789583608006,5.2943989459387595,0.07223863627816912,96.31603648949267,11.943,295.019,0.8363202533393558,4147.55501780355],
[1.4099723340646415,0.466780873890388,0.02461462810077026,99.21604790211549,3.844,269.312,0.9210842661415696,520.519731082232],
[0.07083092597703063,0.008142536265596021,0.0001281310975985276,99.93423931828082,0.448,342.433,0.3608941558148968,13.14879541578676],
[0.18873955620074517,0.04902183881603441,0.0003653298594234784,99.95043801180155,1.952,1754.32,0.2840746885665118,8.770841083091577],
[0.045037272768483,0.012786856542620746,5.198353051500071e-05,99.9919633425905,1.359,6655.793,0.115348675059491,0.7092047111594668]
]


ckpt_simulation_data_130 = [
[11.626727230968509,21.872305608446084,0.42135798746910064,91.4265723159123,27.367,309.169,1.1904534216162859,12053.300883082058],
[3.8564709507655164,5.304938757731731,0.07335014082168918,96.30854950509115,11.938,295.741,0.8338677859677033,4157.347410707209],
[1.4137500093664261,0.5742260941968952,0.023893146950699957,99.17096909077367,3.932,269.877,0.9182351133181815,521.6742677052964],
[0.07091251721322071,0.011969682955460886,0.00012900275715973708,99.93099964874548,0.462,342.826,0.3603292071235405,13.163147232908639],
[0.18917449133152633,0.04118562816204998,0.0003701947701300217,99.9519767075464,1.932,1758.392,0.2832681463210766,8.7910935953605],
[0.045139046578245086,0.012826436597436522,5.5518007477950773e-05,99.9919432394848,1.432,6670.91,0.11507723402366449,0.7108051735602269]
]

ckpt_simulation_data_120 = [
[11.622587690529526,22.46719679298736,0.4269422404978966,91.29032310091452,27.908,309.045,1.1909931889179834,12039.456385527861],
[3.8518985921597975,5.254573932654785,0.07162251167271899,96.33148218979066,11.791,295.357,0.8351971299636926,4153.367909578535],
[1.4117923905125582,0.5877598827834399,0.02277268672463837,99.16664881064594,3.802,269.36,0.9197709544936065,520.9695278115817],
[0.07095786868714173,0.011885166775587652,0.0001329333225691276,99.93102257777576,0.476,343.057,0.360041735386052,13.17269052169108],
[0.18899487464467557,0.04097325184883609,0.0003596625302372747,99.9520605695074,1.879,1756.677,0.28357592266368464,8.782808547471175],
[0.04512406272310411,0.012482118232871119,5.512057908423189e-05,99.99199310611738,1.411,6668.686,0.11507929382609734,0.7105742460384312]
]

ckpt_simulation_data_110 = [
[11.62778093217116,21.980111467868298,0.41049276898837767,91.40362909452496,27.365,309.123,1.1904211994557397,12054.251765373896],
[3.851558931234799,5.3348898435695995,0.07240802281440431,96.29992807391024,11.92,295.324,0.8350685547802512,4152.02790410475],
[1.4127764908012606,0.7131094406875179,0.021610524888104075,99.11571314475185,3.871,269.314,0.9196558053124503,521.0542456194172],
[0.07088414665647301,0.01608761756747152,0.00013042599145968026,99.92760431548905,0.48,342.689,0.36053147641001493,13.158131570794929],
[0.18896440011088828,0.043168128530593625,0.0003617833023817334,99.95160992657574,1.896,1756.401,0.28367919959263915,8.781360570595613],
[0.04514034599125726,0.01075860447613201,5.8174420928298736e-05,99.99222976565838,1.464,6671.16,0.11504254074369205,0.7108293722526801]
]

#run this
ckpt_simulation_data_100 = [
[11.608099298993096,21.83397395411351,0.40474144321089606,91.44442698237295,27.079,308.584,1.1932023948632042,12039.77985601512],
[3.8464117618329263,5.23747178702085,0.0703759863829107,96.33968738884694,11.674,294.9,0.8366371311060413,4147.583705225446],
[1.4110675424504557,0.7277649188766672,0.021039833298398057,99.11060727562177,3.814,268.921,0.9213926828808923,520.3756726732136],
[0.07070232659207043,0.01431958547242002,0.00012703937972183087,99.92922115195398,0.458,341.803,0.3614119822996988,13.125307485941674],
[0.1886567473085511,0.044346896820652036,0.00037357553822946486,99.95142545902284,1.971,1753.594,0.28421246268409267,8.767097181703868],
[0.045081567860024915,0.01337832423917571,5.785141345524414e-05,99.99187427812039,1.505,6662.466,0.1151818224192784,0.7098985301507783]
]

ckpt_simulation_data_90 = [
[11.63466762217419,22.42383465866474,0.4112144519148943,91.30241486010725,27.659,309.28,1.1899904717675327,12053.471495816819],
[3.8534401302040133,5.200104194572311,0.07289496610584278,96.35088929491874,11.842,295.503,0.8346735635748833,4155.063908294479],
[1.4137923362605627,0.7216463207354175,0.02112150496458662,99.11201369545243,3.831,269.447,0.9190602301852496,521.381437909791],
[0.07093798858898531,0.014548948205669465,0.00014598630541914507,99.92881752002795,0.528,342.999,0.3601146372438372,13.168862237065756],
[0.18915112393280104,0.037565734593584865,0.00035354823406652216,99.95273773501107,1.847,1758.1,0.28334601769242623,8.790196167140712],
[0.04508960120955184,0.011506924580060278,5.517019303195192e-05,99.99213333085794,1.397,6663.598,0.11526907502403282,0.710029876647853]
]

ckpt_simulation_data_80 = [
[11.631845208238525,22.091556939512838,0.4068678650880596,91.37999241787494,27.486,309.187,1.1903037761963706,12056.628880901691],
[3.853897366064583,5.274420482298004,0.07244427201476142,96.3217384787118,11.951,295.501,0.8347102713177227,4154.9992922551855],
[1.4134431393839255,0.7258495956434144,0.021163062278829997,99.1103106753773,3.834,269.381,0.9193403960268053,521.2884722284163],
[0.07099224469020449,0.012480885335155303,0.00013584361760682703,99.93049586605393,0.489,343.231,0.3597909533786635,13.179228898523158],
[0.18907477607252202,0.04132259837941608,0.00036856738587644444,99.95196924095247,1.927,1757.459,0.28346997050415745,8.786503213890096],
[0.045154274073460905,0.013037703662321497,5.731392902266808e-05,99.99191153225357,1.463,6673.2,0.11500848325399166,0.711047510316538]
]

ckpt_simulation_data_70 = [
[11.63854373731253,22.59556558246128,0.40437889732813426,91.26214749723192,27.747,309.319,1.1892579236472818,12055.538302420427],
[3.8580255526914637,5.357224049968289,0.07320709623105151,96.2880850971165,12.009,295.843,0.8335700736218746,4158.579932883056],
[1.416226132673473,0.8794370434299876,0.018834409718860235,99.04765133742383,3.8,269.528,0.9180059717920254,521.9925005795565],
[0.07104422286351535,0.01332650085225723,0.0001369448618174952,99.92975437051652,0.494,343.485,0.35953070017661115,13.187982766511432],
[0.18924297826967948,0.03332200584253965,0.0003591943422664056,99.95360012222223,1.846,1758.987,0.2831734599396047,8.794436338743923],
[0.04519414980738568,0.012668764079669981,5.726689913440563e-05,99.99195719554564,1.478,6679.089,0.11488905872511285,0.7116756415997648]
]

ckpt_simulation_data_60 = [
[11.617168655773035,21.922348895275974,0.39502910597141666,91.42372871631,27.142,308.745,1.191963613081534,12047.27918456477],
[3.8542631547530473,5.461733114582755,0.0630773152416164,96.25312143069735,11.948,295.166,0.8351398229138564,4153.545664140811],
[1.4184959123716099,1.750842789477265,0.009276948923870269,98.69776853696904,3.986,268.301,0.9196077458109669,521.0390831824539],
[0.0710023918236401,0.013972200573794601,0.00013899302362797877,99.92925752984291,0.508,343.287,0.3598989272383069,13.179978408134101],
[0.18871941931801708,0.037521523102400506,0.0003571730434881781,99.95283529053236,1.866,1754.108,0.2841070522357695,8.770152308221373],
[0.0450785494319883,0.012622640483319894,5.6228623917051966e-05,99.99197981970029,1.458,6661.985,0.11520515735197806,0.7098548706003233]
]

ckpt_simulation_data_50 = [
[11.62849594370153,22.355936197036623,0.39756930541050517,91.32055637656806,27.494,309.025,1.1905494243588142,12054.33185700806],
[3.8566538451097476,5.556223171046858,0.06271852125848647,96.21627664709418,11.971,295.334,0.8345454444611452,4155.181130548941],
[1.419046161995402,1.7353689405208952,0.009014906970164403,98.7035906732356,3.95,268.379,0.9191764177290922,521.3139202203628],
[0.07086198863040291,0.01255548663795885,0.00012861503536584068,99.93054993136094,0.469,342.578,0.36056194400265945,13.154843579064169],
[0.18895686224035818,0.03668232152849887,0.00036113871497507296,99.95296047574426,1.876,1756.335,0.2837034571303572,8.781106895659892],
[0.045086427122746485,0.011060527647986282,5.678884807559917e-05,99.99219554917055,1.459,6663.163,0.11523940524277541,0.7099772618840775]
]




ckpt_lm_simulation_data_150 = [
[6.560720009556552,14.327797092706481,0.1458705628540237,94.51681833592403,10.152,174.338,2.127447328770574,6993.5554307903785],
[1.3551948352092793,2.432498260795084,0.009427372107072682,98.45786115037089,1.89,103.736,2.3918378927034634,1486.3665781293753],
[0.49156338506700753,0.8246952469477616,0.0012201689210042232,99.4597522323416,0.604,92.908,2.6747019478333627,181.24449120420937],
[0.02387848289978664,0.031897673556987104,5.376662910918872e-06,99.95389498898,0.068,115.308,1.078567318891372,4.4201521355602935],
[0.06257412480388166,0.12092178319843418,1.1759078060009642e-05,99.96185600570186,0.286,581.091,0.8564590499450543,2.906044890867723],
[0.01301774872475852,0.026547219747629913,1.2188613201848387e-06,99.99450830304214,0.142,1923.49,0.3947602628770979,0.20494534392725017]
]

ckpt_lm_simulation_data_140 = [
[6.575885780437552,14.191202592233852,0.14668957606153776,94.54910345154555,10.209,174.741,2.122739056144985,7009.356015552651],
[1.4349367692930843,2.4954590100458756,0.010330205097220909,98.40011519339807,2.071,109.84,2.259032065477706,1573.313023382157],
[0.49163216626997985,0.7657264076668889,0.0011434033266363537,99.48357174189181,0.566,92.921,2.6736499892657966,181.33312792661027],
[0.023950341171252817,0.029872626705220333,4.9022514776024815e-06,99.95550467948034,0.062,115.655,1.075475160957549,4.433032743458168],
[0.0626456268902471,0.11896177095906088,1.1224574511822904e-05,99.96225280749299,0.273,581.755,0.8556769281452475,2.9094162571737825],
[0.01309021806607534,0.02768384093138409,1.2102777897431417e-06,99.99434042786017,0.141,1934.198,0.3927600771311455,0.20608476031462145]
]

ckpt_lm_simulation_data_130 = [
[6.601249873672773,14.434863734974504,0.14548260922941395,94.48257176852819,10.125,175.415,2.114135766275663,7038.978955159464],
[1.5573322772274139,2.7796724953305834,0.012260571766764365,98.23581762342462,2.458,119.209,2.080562398191711,1705.3897091189879],
[0.4947696472979311,0.7660028287472009,0.001187846565480776,99.48205065759743,0.588,93.514,2.6552951466101273,182.48541529177453],
[0.024059888795475964,0.03842979651578471,6.167348633113079e-06,99.94836195422093,0.078,116.184,1.0701775184646698,4.4530366093138625],
[0.06284925707901619,0.11387437087137361,1.1183458854273965e-05,99.96326287166139,0.272,583.646,0.8529400761247706,2.9188555500299107],
[0.013204268620716757,0.02822595465069991,1.3476142766384313e-06,99.99424919626439,0.157,1951.05,0.389501778764367,0.2078795262745181]
]

ckpt_lm_simulation_data_120 = [
[6.618635943516493,14.175776321923237,0.14720684756102068,94.53854759179556,10.245,175.877,2.109026927318436,7061.318104905893],
[1.6461666729957405,2.8484513391019086,0.013138464619063178,98.17116414551083,2.634,126.009,1.9681042069479626,1802.7067700576292],
[0.49574845672486206,0.7449703754284622,0.0011494637682970587,99.49066376714296,0.569,93.699,2.651364047141298,182.84894435906077],
[0.02416653723871771,0.03580839107189396,5.692937199796355e-06,99.95044334964494,0.072,116.699,1.065659184060921,4.472769954923227],
[0.06296264818886774,0.10781194408855103,1.0772302278734713e-05,99.96449716550308,0.262,584.699,0.8514387494989997,2.9242495863070954],
[0.01328971178791134,0.02599703557760234,1.244611911486615e-06,99.9945468044977,0.145,1963.675,0.387066492198572,0.20922635836225875]
]

ckpt_lm_simulation_data_110 = [
[6.649456703693993,14.198311453094437,0.14635909704797798,94.52750340027353,10.186,176.696,2.098682257094996,7091.4141467441195],
[1.8694414756540474,3.192655684493215,0.017044090206279002,97.94234805717053,3.417,143.1,1.7318024378341772,2043.2193631188104],
[0.5013091524421892,0.7714927766230498,0.0011939070071416407,99.47736773241168,0.591,94.75,2.6203962073206233,184.89231542780234],
[0.02431273879392053,0.033935947712802644,5.218525766480298e-06,99.95187560955476,0.066,117.405,1.0589326141004158,4.500519669904703],
[0.06320019879511216,0.10271811558359632,1.0361145703216002e-05,99.96550526402537,0.252,586.905,0.8485182675795787,2.9352519760363878],
[0.01341046920817957,0.028331669340841328,1.3304472158472969e-06,99.99420603637844,0.155,1981.518,0.38387115112620607,0.21112808852669201]
]

#run this
ckpt_lm_simulation_data_100 = [
[7.602378912747646,15.844405424700012,0.1817490888042295,93.8795463837635,12.649,202.018,1.8352637771747817,8064.016420850707],
[2.0014650644238534,3.2991675097781377,0.01848563017397426,97.84733734012049,3.706,153.206,1.6154357617935444,2186.417424125863],
[0.5107004320789706,0.7958901782787587,0.0012302696571052493,99.46357676564534,0.609,96.525,2.5697245217232694,188.39639774604655],
[0.024702264467199312,0.035462667385417666,4.744114333163796e-06,99.95025276334071,0.06,119.286,1.0418476871679825,4.573401390961334],
[0.0646064423882854,0.10945350094734159,1.0690070963640386e-05,99.96381583334387,0.26,599.964,0.8298657642754464,3.0005058546262893],
[0.013713415148182214,0.034621201040903986,1.5278684156676548e-06,99.99329099084999,0.178,2026.281,0.3761554483373362,0.2158966678762128]
]


ckpt_lm_simulation_data_90 = [
[11.009634648073783,22.97004691854228,0.3353499868449457,91.34113194374706,23.339,292.559,1.262639667789844,11434.058149218257],
[2.34098228672135,3.4374693285456277,0.022775333884070777,97.65328796063612,4.566,179.195,1.3789885460773295,2554.0013255705235],
[0.5380753508624659,0.7356592319690137,0.0011878465654809312,99.4764291771594,0.588,101.699,2.4328514629616245,198.55294486648808],
[0.025881402789182644,0.03424904223458274,5.77200577201542e-06,99.95024910933147,0.073,124.98,0.9917779239406044,4.792589903173329],
[0.06852355066191906,0.09831921258803641,1.0936764908958008e-05,99.96530898700595,0.266,636.34,0.7827901347009325,3.1826535124773474],
[0.014445620792195937,0.025183341389816184,1.3390307462337603e-06,99.99449898986629,0.156,2134.471,0.36015403475490443,0.22743055575115548]
]

ckpt_lm_simulation_data_80 = [
[11.024762786768953,23.085246144143007,0.3389277813830368,91.30796051829134,23.588,292.961,1.261007886654654,11443.886291554316],
[2.346312350467453,3.4945744892966215,0.02274540571865152,97.62891212074838,4.56,179.603,1.3752136623733677,2559.9934859547448],
[0.539826626107409,0.7725791799442374,0.0012848136320508436,99.46043941776612,0.636,102.03,2.4243362898156553,199.21450565251044],
[0.025961958603591562,0.030154168112947882,4.744114333163685e-06,99.95358148867423,0.06,125.369,0.988441478275027,4.807931110744974],
[0.06876325494544039,0.10737804193730575,1.1183458854266804e-05,99.96337888325634,0.272,638.566,0.7798261724951376,3.1937191125059763],
[0.014598234132403175,0.0322489070736654,1.6308707807715094e-06,99.99349722987934,0.19,2157.021,0.3562813624054531,0.22982767560939305]
]

ckpt_lm_simulation_data_70 = [
[11.02995602841062,23.280679291046887,0.33986174381265516,91.26523662873488,23.653,293.099,1.2600763798729946,11447.402769652508],
[2.3483372521357038,3.4901767784848525,0.02277034585650091,97.63000641357672,4.565,179.758,1.3740455603570545,2561.7486272708716],
[0.5403028036664569,0.7132613205452756,0.0011151212655535752,99.48465755879795,0.552,102.12,2.4229587974689903,199.3739297133359],
[0.026002754221685936,0.04169128979092515,6.9580343553066195e-06,99.9440348363366,0.088,125.566,0.9868516722608706,4.81517070264012],
[0.06889150642866557,0.10724994484577231,1.1882425032647248e-05,99.96337877032454,0.289,639.757,0.7784407806044069,3.1995950716562365],
[0.014710382942167947,0.029897701017358835,1.4592001721336344e-06,99.99380783924481,0.17,2173.592,0.35366282984092806,0.2315970681089646]
]

ckpt_lm_simulation_data_60 = [
[11.013322602283058,23.1906630656336,0.3346746601650694,91.29057437167553,23.292,292.657,1.2624041366658003,11437.316023117819],
[2.349486873727999,3.5382219890143447,0.023164400034521408,97.6100106142884,4.644,179.846,1.3739151473919973,2562.187611637497],
[0.5431757416060462,0.735868995249215,0.0012423905404265008,99.4738716940739,0.615,102.663,2.409417373081299,200.4421158367635],
[0.0260392010683096,0.029914080985353912,4.9022514776024815e-06,99.95370742227328,0.062,125.742,0.9856771708304771,4.8222814817608235],
[0.06904247920742,0.096016650229584,1.0895649251405737e-05,99.96567856298273,0.265,641.159,0.7767913563298396,3.2067601363913343],
[0.014817949967833827,0.02626383134004609,1.3390307462044504e-06,99.99429742773039,0.156,2189.486,0.3510821160436844,0.23328962987164276]
]

ckpt_lm_simulation_data_50 = [
[11.210515255921788,22.539460644567907,0.333180320277677,91.39111973478354,23.188,297.897,1.240164576317988,11647.200997405977],
[3.695236522446007,5.565433752122305,0.05419491954674311,96.27986900146674,10.865,282.859,0.87194496338742,3985.342105567527],
[0.6614582472735671,0.8387606355719353,0.0017292460204959012,99.38250170015641,0.856,125.019,1.9762313085716776,244.1008535705286],
[0.026781805568245377,0.03498851435401767,6.404554349771052e-06,99.94888777781277,0.081,129.328,0.9570859526184541,4.960092831396572],
[0.07016196066820282,0.10677457620410352,1.1389037142022108e-05,99.96321017672129,0.277,651.555,0.7656253218075335,3.2586566865267517],
[0.015159722636179738,0.03265784938939016,1.545035476249179e-06,99.99336242525783,0.18,2239.986,0.34439052616138643,0.23867114920362936]
]

base_simulation_data_no_bb = [base_simulation_data_no_bb_100
                              ]

base_simulation_data = [base_simulation_data_100
                              ]

ckpt_lm_simulation_data = [ckpt_lm_simulation_data_150,
                           ckpt_lm_simulation_data_140,
                           ckpt_lm_simulation_data_130,
                           ckpt_lm_simulation_data_120,
                           ckpt_lm_simulation_data_110,
                           ckpt_lm_simulation_data_100,
                           ckpt_lm_simulation_data_90,
                            ckpt_lm_simulation_data_80,
                           ckpt_lm_simulation_data_70,
                              ckpt_lm_simulation_data_60,
                              ckpt_lm_simulation_data_50
                              ]

ckpt_simulation_data = [ckpt_simulation_data_150,
                        ckpt_simulation_data_140,
                        ckpt_simulation_data_130,
                        ckpt_simulation_data_120,
                        ckpt_simulation_data_110,
                        ckpt_simulation_data_100,
                        ckpt_simulation_data_90,
                        ckpt_simulation_data_80,
                        ckpt_simulation_data_70,
                        ckpt_simulation_data_60,
                        ckpt_simulation_data_50]

base_model_data = [ckpt_simulation_data_100,
              ckpt_lm_simulation_data_100]

model_data = [ckpt_simulation_data,
              ckpt_lm_simulation_data]

ckpt_time = []
recovery_time = []
recomputation_time = []

failure_percentages = ['+50', '+40', '+30' , '+20', '+10', '0', '-10', '-20', '-30', '-40', '-50']
applications = ['CHIMERA', 'XGC', 'S3D', 'GYRO', 'POP', 'VULCAN']
col_list = ['Checkpoint time', 'Re-compuation waste time', 'Reovery time']
models = ['M1', 'M2']
colors = ['red', 'blue']

def data_clear():
    ckpt_time.clear()
    recomputation_time.clear()
    recovery_time.clear()


plt.rcParams.update({'font.size': 18, 'font.family':'Times New Roman'})

legend_elements_1 = [Line2D([0], [0], marker='o', label='Checkpoint', color='black'),
                     Line2D([0], [0], marker='v', label='Recomputation', color='black'),
                     Line2D([0], [0], marker='^', label='Recovery', color='black'),
                     Line2D([0], [0], color='red', label='M1'),
                     Line2D([0], [0], color='blue', label='M2')]

app_index = 0
for app in applications:
    model_index = 0
    axe = plt.subplot(111)
    #plt.subplots_adjust(hspace=0.01)
    model_index = 0
    for model in models:
        data_clear()
        failure_index = 0
        for failure_percentage in failure_percentages:
            ckpt_time.append(float(base_simulation_data_100[app_index][0] - model_data[model_index][failure_index][app_index][0]) / base_simulation_data_100[app_index][0] * 100)
            recomputation_time.append(float(base_simulation_data_100[app_index][1] - model_data[model_index][failure_index][app_index][1]) / base_simulation_data_100[app_index][1] * 100)
            recovery_time.append(float(base_simulation_data_100[app_index][2] - model_data[model_index][failure_index][app_index][2]) / base_simulation_data_100[app_index][2] * 100)
            failure_index += 1
        print (applications[app_index], models[model_index], recomputation_time, ckpt_time, recovery_time)
        l1, = axe.plot(failure_percentages, ckpt_time, 'o', color=colors[model_index], linestyle='solid', label = 'Checkpoint Overhead')
        l2, = axe.plot(failure_percentages, recomputation_time, 'v', color = colors[model_index], linestyle='solid', label = 'Recomputation Overhead')
        l3, = axe.plot(failure_percentages, recovery_time, '^', color= colors[model_index], linestyle='solid', label = 'Recovery Overhead')
        #axes.set_title('Model ' + models[model_index], x=0.5, y=0.25)
        model_index += 1
    axe.tick_params(axis='x', labelsize=18)
    axe.tick_params(axis='y', labelsize=18)
    axe.set_ylim(0, 150)
    axe.set_yticks([10, 20, 30, 40, 50, 60, 70, 80, 90, 100])
    legend_properties = {'size': '18', 'family': 'Times New Roman', 'weight': 'normal'}
    axe.legend(handles=legend_elements_1, loc='upper center', prop=legend_properties, ncol=2, borderaxespad=0, borderpad = 0.2)
    plt.xlabel('Failure Prediction Lead Time Change (percentage)', fontsize=18)
    plt.ylabel('Overhead Reduction (percentage)',  rotation='vertical', fontsize=18)
    plt.subplots_adjust(bottom=0.2)
    plt.savefig(str(applications[app_index]) + '_leadtime.png', dpi=400)
    plt.clf()
    app_index += 1



'''
app_index = 0
for app in applications:
    model_index = 0
    figure, axes = plt.subplots(1, 2)
    for model in models:
        failure_index = 0
        data_clear()
        ckpt_time_base = float(base_model_data[model_index][app_index][0])
        recomputation_time_base = float(base_model_data[model_index][app_index][1])
        recovery_time_base = float(base_model_data[model_index][app_index][2])
        for failure_percentage in failure_percentages:
            ckpt_time.append((ckpt_time_base - float(model_data[model_index][failure_index][app_index][0])))
            recomputation_time.append((recomputation_time_base - float(model_data[model_index][failure_index][app_index][1])))
            recovery_time.append((recovery_time_base - float(model_data[model_index][failure_index][app_index][2])))
            failure_index += 1
        print(len(failure_percentages), len(ckpt_time))
        l1, = axes[axes_index[model_index]].plot(failure_percentages, ckpt_time, 'o', color='black', label = 'Checkpoint Overhead')
        l2, = axes[axes_index[model_index]].plot(failure_percentages, recomputation_time, 'v', color = 'black', label = 'Recomputation Overhead')
        l3, = axes[axes_index[model_index]].plot(failure_percentages, recovery_time, '^', color= 'black', label = 'Recovery Overhead')
        l4, = axes[axes_index[model_index]].plot(failure_percentages, [ckpt_time_base] * len(failure_percentages), 'o', linestyle='solid', color='black')
        l5, = axes[axes_index[model_index]].plot(failure_percentages, [recomputation_time_base] * len(failure_percentages), 'v', linestyle='solid', color='black')
        l6, = axes[axes_index[model_index]].plot(failure_percentages, [recovery_time_base] * len(failure_percentages), '^', linestyle='solid', color='black')
        axes[axes_index[model_index]].set_title('Model ' + models[model_index], x=0.5, y=0.5)
        axes[axes_index[model_index]].tick_params(axis='x', labelsize=15)
        axes[axes_index[model_index]].tick_params(axis='y', labelsize=15)
        #if model_index == 0 or model_index == 1:
            #print('hello')
            #axes[axes_index[model_index]].tick_params(axis='x', which='both', bottom='off', top='off', labelbottom='off')
            #axes[axes_index[model_index]].set_xticks([])
        #axes[axes_index[model_index]].xlabel('I/O Performance')
        #axes[axes_index[model_index]].ylabel('Overhead')
        #axes[axes_index[model_index]].title('Impact of I/O variability on C/R Model ' + models[model_index])
        #axes[axes_index[model_index]].legend()
        model_index += 1
    #handles, labels = axes[0].get_legend_handles_labels()
    legend_properties = {'size': '15', 'family': 'Times New Roman', 'weight': 'normal'}
    figure.legend((l1, l2, l3, l4, l5, l6), ['Checkpoint', 'Recomputation', 'Recovery',
                                             'Base Checkpoint', 'Base Recomputation',
                                             'Base Recovery'], loc='upper center', ncol=3,
                  borderaxespad=0, borderpad=0.0, prop=legend_properties, handletextpad=0.1, columnspacing=0.2)
    figure.text(0.5, 0.01, 'Failure Prediction Lead Time Change (percentage)', ha='center', fontsize=15)
    figure.text(0.0, 0.5, 'Overhead (hrs)', va='center', rotation='vertical', fontsize=15)
    plt.savefig(str(applications[app_index]) + '.png', dpi=400)
    plt.clf()
    app_index += 1
'''



