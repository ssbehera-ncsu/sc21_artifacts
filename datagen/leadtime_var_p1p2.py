import statistics
from operator import itemgetter
import numpy as np
import matplotlib.pyplot as plt
import glob
import seaborn as sns
import pickle
from dateutil import parser
import pandas as pd
from scipy.stats import lognorm
from scipy.stats import alpha
from scipy.stats import fisk
from scipy.stats import genextreme
from scipy.stats import gengamma
from scipy.stats import loglaplace
from scipy.stats import burr
from scipy.stats import maxwell
from scipy.stats import mielke
from scipy.stats import moyal
from scipy.stats import nakagami
from scipy.stats import norminvgauss
from scipy.stats import powerlognorm
from scipy.stats import wald
from scipy.stats import cauchy
from mpl_toolkits import mplot3d
from matplotlib.lines import Line2D


#col_list = ['computation time', 'checkpoint time', 'waste time', 'restart time', 'wallclock time', 'efficiency',
#             'no. of failures', 'no. of checkpoints', 'checkpoint interval', 'pct. of checkpoints to BB', 'daily write workloads to Burst Buffers']



base_simulation_data_100 = [[11.66334334776059,22.27970177855433,0.35048017820480626,91.34025287404243,24.392,309.93,1.1917206930958053,12096.088965243478],
[3.850918801029999,5.406087261961279,0.056329795346651605,96.27861466925067,11.293,294.776,0.8360953565575328,4152.060573635537],
[1.4172102329621803,1.791977080827532,0.007763425767250589,98.68219992550961,3.843,267.86,0.9208692891823053,520.5987262626995],
[0.07086778699236125,0.08378470087181104,4.0166834687451584e-05,99.8715933336118,0.508,342.217,0.36071208366649493,13.147690451118716],
[0.18897506081349869,0.25179545236673395,7.64340073899965e-05,99.90829603731854,1.859,1754.906,0.28375550112558623,8.778098396131735],
[0.045078102758853586,0.07918580906827347,1.2154279080843988e-05,99.98274537817224,1.416,6660.697,0.11524480671938822,0.7097806223545494]]


ckpt_simulation_data_150 = [
[11.358843253602089,3.125675301715027,2.7853003341209583,95.43298006843828,25.855,319.987,1.1902863308614924,11984.687913247768],
[3.8094870209381253,0.8253331322474383,0.29003840050338564,97.99374565027912,11.569,299.753,0.8352201748403393,4147.789374594251],
[1.412083901217053,0.2679203090405673,0.02710171792129477,99.29535842337506,3.851,269.632,0.9200707739542836,520.7699826765662],
[0.07086339536306713,0.010102035280790135,0.00013285044346330222,99.93258043984562,0.469,342.505,0.3605515717789948,13.15165099033586],
[0.18767320994895023,0.032446449904003194,0.0003685077018590256,99.95410705636874,1.878,1743.946,0.2861706645766873,8.718993934088996],
[0.04486703070626147,0.009926464712938362,6.0009620181569634e-05,99.99238300067607,1.477,6629.158,0.11581507092880812,0.7063479782655222]
]

ckpt_simulation_data_140 = [
[11.37058288288023,3.1180035807804027,2.8356557236540185,95.41923242133596,26.16,320.642,1.1886979304855485,11992.910997223593],
[3.8174717979590316,0.7885827995917732,0.2897937807513207,98.00521320677578,11.463,300.376,0.8336430559208162,4156.732592433345],
[1.4149786783168747,0.2716127018623534,0.027301423903635432,99.29263039095365,3.862,270.196,0.9182447585830388,521.8318999620487],
[0.07097212414108557,0.012626079489418282,0.000140873521960078,99.93039053594394,0.505,343.046,0.3601767013614593,13.171135761967696],
[0.18789295170814985,0.03755585168414408,0.00036366799107201165,99.95299953543514,1.877,1745.968,0.28587810040881584,8.729160331495738],
[0.04494232171478813,0.010400584512950927,5.981064757824295e-05,99.9923067588624,1.483,6640.284,0.11560361372996171,0.7075337508727043]
]

ckpt_simulation_data_130 = [
[11.36669503251914,3.4349538013909298,2.763935415866981,95.3591676855816,25.945,319.935,1.189776884150102,11988.166029985328],
[3.805906841216712,0.7707361654538826,0.28813885640420567,98.01767526215598,11.435,299.452,0.8364333921578664,4144.646682212283],
[1.4106578507846788,0.2548927563388761,0.027096811849475138,99.30131881134255,3.831,269.365,0.9213437872308885,520.2590523587033],
[0.07079679760940363,0.013000732411003591,0.00013678481940630044,99.93022989400676,0.489,342.191,0.36111447225476523,13.138253439781506],
[0.1875521066100861,0.033824741711547056,0.0003751286490368976,99.95384366826796,1.918,1742.84,0.28638232552361187,8.713338369455725],
[0.04481513193614621,0.011951886905531135,5.888762142594261e-05,99.9921091674625,1.491,6621.497,0.11599417398096201,0.7055327627700249]
]

ckpt_simulation_data_120 = [
[11.390111540117148,4.06471574805461,2.724414466169479,95.20472830699231,26.295,320.21,1.187658892655041,12002.20699494135],
[3.809339801687671,0.7562669316636826,0.29555643180270935,98.01904173704555,11.65,299.927,0.8354611167877839,4147.575995758561],
[1.4125165291887023,0.26747036632788296,0.02633189753416927,99.29574485046417,3.754,269.637,0.9203082097900838,520.9276619059036],
[0.0710395743920988,0.010363488982405267,0.00013292951203551276,99.9322168915922,0.47,343.355,0.3597828210832704,13.183971446681591],
[0.18792040350956168,0.038279791820143697,0.00035856699691050054,99.95284437395432,1.861,1746.205,0.285805160025437,8.730452109987727],
[0.04493836487678338,0.011037867353311654,5.819664384297832e-05,99.9922190650548,1.456,6639.709,0.11563513675089004,0.7074754305440272]
]

ckpt_simulation_data_110 = [
[11.382298119082149,4.5819726157118685,2.63539069342799,95.09986805713844,26.087,319.265,1.1900165219386725,11989.658812435404],
[3.8099078240285245,0.8226004830289019,0.28918579179083875,97.9950254185702,11.493,299.765,0.8353499290881681,4148.02699455231],
[1.4120157497898316,0.2547984761168235,0.026699852920705182,99.3009598013774,3.778,269.582,0.9201607735146837,520.7767106516269],
[0.07097449353121357,0.007155363942872788,0.00014094306419829786,99.93492648625543,0.491,343.062,0.3599917608362495,13.171494581417486],
[0.18791225675306814,0.038081044918049166,0.00036172759729639475,99.95288623365138,1.886,1746.139,0.28570720612868805,8.730172050943898],
[0.044881130293107696,0.009340936443260525,5.656351806463622e-05,99.9924628318996,1.405,6631.262,0.11580538313553441,0.7065805176717026]
]

ckpt_simulation_data_100 = [
[11.416277428771643,5.855953547339879,2.461130031154344,94.81716275473445,26.125,318.71,1.1887377698982449,12010.005202488308],
[3.8127756433574165,0.8201716128345485,0.2923675599771424,97.99353328034206,11.623,300.094,0.8346274891158644,4150.633129240187],
[1.4134710861167468,0.2629740270395255,0.026959297542271266,99.29689889799384,3.842,269.879,0.9193129528895084,521.2982022455964],
[0.07095440634869969,0.013216860104415704,0.00014244536707046086,99.92991983850438,0.51,342.965,0.36018986316464197,13.16722530980595],
[0.18789581057906887,0.038359352818988196,0.00035286385731381973,99.9528337944477,1.839,1745.958,0.285815747730592,8.729442222637118],
[0.04491759737954553,0.010138126087550527,5.86137110900411e-05,99.99234680276594,1.468,6636.638,0.1157009410912283,0.7071474858195385]
]

ckpt_simulation_data_90 = [
[11.422832253067712,6.411289875332163,2.4026536970865515,94.69261832366453,26.268,318.394,1.1892931465713033,12008.02419087473],
[3.812281237437554,0.8343681611640748,0.29628594803489816,97.9866294733467,11.801,300.153,0.8351083414653263,4149.686396552334],
[1.4131653469526948,0.24504266108553324,0.02655021773018051,99.304560500187,3.742,269.79,0.9199683638970628,521.227572721783],
[0.07103562368272279,0.012726104862119185,0.00013655332949001517,99.93025663148337,0.495,343.342,0.3597974655747511,13.182903537712027],
[0.18799774671737687,0.04086230868531176,0.00036563889001030715,99.95229029465098,1.899,1746.946,0.28563914270504165,8.733910006644665],
[0.04491278714162502,0.009539092335531539,5.7948574103373065e-05,99.99243071554747,1.443,6635.931,0.11572131134102463,0.7070753295976716]
]

ckpt_simulation_data_80 = [
[11.451598822435221,7.95474153973539,2.2126895044795316,94.35120822318207,26.531,317.571,1.1889244264083239,12018.843485585632],
[3.816882516660583,0.8330486007633444,0.2925795855490518,97.9866105798262,11.675,300.405,0.8338582916792316,4155.019521866641],
[1.4146334208756841,0.2650491304002965,0.026896672978444898,99.29553201561559,3.811,270.097,0.9185392991931126,521.7500556018529],
[0.0710106996423378,0.014089629576250127,0.00014048198963259245,99.92914786819888,0.506,343.23,0.35990727491020524,13.17787475153991],
[0.1881550697553952,0.03677196830675171,0.00038779492418630334,99.95310280259712,1.984,1748.478,0.2853325881208922,8.741121064545323],
[0.04491270840362771,0.010848846625999636,5.5170193032173784e-05,99.99224926501806,1.397,6635.936,0.11575839274063028,0.7070815801683142]
]

ckpt_simulation_data_70 =[
[11.443752768598866,8.130240639773357,2.1976707940462785,94.31428387788799,26.438,317.249,1.1901249055467964,12009.152118917935],
[3.814790206040117,0.8270944701205016,0.2954485098062011,97.98855529809579,11.785,300.308,0.8343321547508487,4152.89572797633],
[1.4136042080445483,0.25391453606479236,0.02718641980831431,99.3004163425772,3.849,269.932,0.9190604464376075,521.4006450131441],
[0.07099856363634019,0.012104011645133294,0.00013450516767952498,99.93080850500039,0.481,343.16,0.35986519051490984,13.176252962254468],
[0.18810689714719533,0.038078482441110464,0.0003600577710754586,99.95284650105312,1.867,1747.941,0.285366729425334,8.739174146717442],
[0.04494524209162383,0.011764989297141036,5.564927771478611e-05,99.99211745997313,1.433,6640.741,0.11560407833366096,0.7075938360039237]
]

ckpt_simulation_data_60 = [
[11.431218981689936,8.01940556812382,2.176432419030781,94.3500747019249,26.194,316.81,1.191636920223303,12002.877280259589],
[3.8166646165540414,0.8137420870181318,0.2877203436909966,97.99633880800972,11.484,300.246,0.8342321788253602,4155.566634883337],
[1.4142496931801525,0.2757327959565585,0.02722292675450767,99.2912776881584,3.87,270.054,0.9189503902557756,521.5423323131654],
[0.0709361061318861,0.010265593715854723,0.000128761740909497,99.93238876602874,0.453,342.847,0.3603355352994818,13.164932765219968],
[0.1877911423897664,0.033539237989190375,0.00037064306342751366,99.95385446078019,1.904,1745.046,0.2859358986343174,8.72444004431772],
[0.04484721630885618,0.011212613910461357,5.5682353680545523e-05,99.99220778526431,1.396,6626.256,0.11591281661179886,0.7060497923501207]
]

ckpt_simulation_data_50 = [
[11.49298548251419,13.130100448460192,1.555914360642373,93.24524267612522,26.743,313.605,1.1925946829868568,12007.118593575364],
[3.807706965978186,0.8009150285955076,0.28379078417149367,98.0065873198045,11.318,299.45,0.836580903193482,4146.618972750726],
[1.410505721282343,0.2804314864770183,0.02693952895875952,99.2909360370005,3.841,269.316,0.9215742054497867,520.1953372585415],
[0.07087268194584316,0.010330840404936136,0.00013772221067210143,99.93238493195882,0.483,342.562,0.3606549770412729,13.152313153883073],
[0.1880065804104911,0.03274153363161413,0.00036016387599721014,99.95397753257433,1.835,1747.017,0.28547489658704495,8.734556364350567],
[0.04494586951394255,0.01005956734054602,5.4746924041632064e-05,99.99235433439205,1.366,6640.838,0.1155567111597418,0.7076052677588157]
]




ckpt_lm_simulation_data_150 = [
[5.469036715740029,4.736537330241928,0.7429747529232429,97.0860403918406,9.04,149.853,2.112634816498261,7024.476068938512],
[1.2086008596100521,2.099126187674472,0.011364799415641997,98.6558323364951,1.818,92.593,2.3880703281053184,1491.4188806816856],
[0.48485938513396504,0.7622956386754295,0.0013357502012454536,99.48806537486969,0.588,91.662,2.6808881004767047,180.8777254782266],
[0.023871698873806385,0.03493158585484805,4.584071921925448e-06,99.95144564626223,0.055,115.276,1.0809375437081934,4.411579553903579],
[0.060172154528147004,0.10660407352164462,1.0249735534369365e-05,99.96533347575894,0.232,558.788,0.8966832900783775,2.7934677576756783],
[0.012530475647210722,0.0267966000166574,3.540161879884707e-07,99.99454139358312,0.137,1851.491,0.4113032338163236,0.19723985102776376]
]

ckpt_lm_simulation_data_140 = [
[5.476145830938745,4.931448513585207,0.7430850249011388,97.03680415053559,9.101,150.052,2.1068246333388427,7037.224307639459],
[1.292051488710189,1.8986282884146122,0.016929055970461244,98.70036065469802,1.932,99.151,2.2479399349556233,1583.0875088128125],
[0.487315498781099,0.749946375019325,0.001312229915753192,99.49203354898721,0.591,92.122,2.6705527478732614,181.62187660798568],
[0.02395033311794405,0.03992854593991216,6.1597275659135695e-06,99.94724428301801,0.066,115.658,1.0767581844503593,4.427317868425038],
[0.06039126517654137,0.11316323833377279,1.0278914388104355e-05,99.963926987896,0.25,560.82,0.8933703600714993,2.8036945960805553],
[0.012636722956633907,0.029493635649394195,4.0311332354026064e-07,99.99415236284557,0.156,1867.19,0.4078937968631267,0.19891308716613856]
]

ckpt_lm_simulation_data_130 = [
[5.500951361492529,5.179804839031006,0.6949285148928372,96.99376600880298,8.85,150.374,2.1009203843405957,7064.476360952902],
[1.4205291526402428,1.7205648031635996,0.025992981468688208,98.71274351266209,2.216,109.25,2.078815721140843,1708.4922980520912],
[0.48775712255254383,0.8338427676145417,0.001412804388073329,99.45794444197792,0.632,92.208,2.662035528561858,181.97410811324193],
[0.024048292071549834,0.0359404975855381,5.139457194260677e-06,99.95042291682206,0.065,116.128,1.0721515284351142,4.4440664350249035],
[0.06050073883379223,0.12348928229496475,1.1744488633140641e-05,99.96175598944774,0.277,561.838,0.8917446731854132,2.8087856642901685],
[0.012730598772204879,0.029618547653199243,3.824408454579098e-07,99.99412210603704,0.148,1881.061,0.40494174621360196,0.20039002659772334]
]

ckpt_lm_simulation_data_120 = [
[5.533234068697502,5.954637983162731,0.6393945043531961,96.79350478463154,8.954,150.798,2.094130295109173,7089.728362986062],
[1.515887827614165,1.705252575699861,0.034277071856602594,98.67614524054224,2.562,116.781,1.9644101942614625,1808.1655730468933],
[0.4903827184466941,0.7855996792425367,0.001484375318160571,99.47617772399052,0.644,92.711,2.65331806252374,182.738413986247],
[0.0241862600102816,0.041027972640423745,6.402649082969836e-06,99.94611111742763,0.078,116.795,1.0667967475656333,4.469880847079963],
[0.060706051130894945,0.12215413837776663,1.1688783548787774e-05,99.96199264406222,0.267,563.746,0.8888241936588704,2.8183333241000437],
[0.012835242118804303,0.036669329535258574,4.6513075784104795e-07,99.99312915380654,0.18,1896.523,0.40180074298364465,0.20203788098706066]
]

ckpt_lm_simulation_data_110 = [
[5.589858613724828,6.6410251737929435,0.5831457871156832,96.60720027712775,9.153,151.831,2.0746665667885145,7151.75545090013],
[1.7538255854724716,1.509888797879949,0.05281780253512997,98.64744212178829,3.246,135.514,1.722452333166279,2054.4253050715015],
[0.49846136332251567,0.8013453130854762,0.0014387777094759474,99.46658261137465,0.639,94.232,2.6126139145979734,185.37977478127237],
[0.024399606654527884,0.04322850137848838,7.270498110585777e-06,99.94410869595823,0.086,117.826,1.0557016137669226,4.511263568421998],
[0.06115431304404954,0.10928777128293164,1.0731186621189437e-05,99.96457074104296,0.261,567.906,0.8826960993980069,2.839296858868605],
[0.012982576593921727,0.03319270055796747,4.237858015646578e-07,99.9935910706376,0.164,1918.293,0.39779751849287603,0.20436073805512048]
]

ckpt_lm_simulation_data_100 = [
[6.722018599513435,8.575442753988764,0.7354860687477467,95.7897882825459,11.825,182.718,1.8290483808494908,8057.418182586629],
[1.8873616829369295,1.4175635729415819,0.06454467255201282,98.62566299911563,3.537,146.092,1.6174942396166863,2183.6591865721534],
[0.5048206527944612,0.731101875089579,0.0013168473951134946,99.49262350356071,0.564,95.439,2.5768690719780043,187.97713277829772],
[0.02464241708836905,0.03608301578800316,5.692937199796048e-06,99.9498187425842,0.072,118.997,1.0457009328999938,4.556445251274958],
[0.06279332831982343,0.10726611439651626,1.0839944166968928e-05,99.96464586336458,0.255,583.128,0.8585652408036859,2.9153564572113826],
[0.013339143620354627,0.030617631495358212,3.97945203782335e-07,99.99389892402529,0.154,1970.979,0.3876808039345229,0.20997530715975973]
]

ckpt_lm_simulation_data_90 = [
[10.765625035239207,7.225095967302855,2.248233330005122,94.7062037623483,25.051,299.874,1.2616425415248067,11347.814402494985],
[2.245335808745618,1.4408508371632927,0.08925594593643044,98.47734580315645,4.523,174.197,1.3783328360682965,2555.0344150194933],
[0.5324660582725399,0.7682882364565019,0.0014295427507551896,99.4657198650029,0.652,100.654,2.433786009037786,198.48127106478753],
[0.025910651441113135,0.041077901285080494,7.193334805165263e-06,99.94460597863748,0.088,125.122,0.9919055187308746,4.79214409860074],
[0.06807905768412126,0.10444140772668627,1.2099940124281089e-05,99.9641301284175,0.277,632.215,0.7892366848960857,3.1608358878167198],
[0.014352597716154826,0.02798144133932737,4.3412204063109086e-07,99.99412369036214,0.168,2120.726,0.3627879535447219,0.22593003986670085]
]

ckpt_lm_simulation_data_80 = [
[10.773988347819586,8.834879884102802,2.010067559367198,94.35921238479608,24.778,298.228,1.263750263432599,11338.74170552458],
[2.2462743934400895,1.2348564712789598,0.08475310724829223,98.54629918679248,4.337,174.156,1.3794449191478608,2554.4545513268577],
[0.5324999593156831,0.7077998121206126,0.0014445495586765241,99.49024387418541,0.636,100.668,2.4343057131915717,198.4534173004094],
[0.025944870117583757,0.035121832621893924,5.689126666197447e-06,99.9495233931985,0.066,125.288,0.9907343516550944,4.797603257029965],
[0.06816068946206696,0.10751415499277543,1.1443415914942622e-05,99.9634806603735,0.274,632.971,0.7879525693331352,3.1647826215147643],
[0.0144718797614964,0.02867098278458896,4.5737857831529283e-07,99.99401137410044,0.177,2138.351,0.35961478053541807,0.227804743697817]
]

ckpt_lm_simulation_data_70 = [
[10.791525177064221,9.113478285340223,2.04446044589701,94.29225348460507,25.13,298.9,1.2620255036684223,11350.806599333437],
[2.2477945298156365,1.3069335464886471,0.0924064529499465,98.51137814592404,4.623,174.477,1.3748617834917944,2559.898560466518],
[0.5348866390153856,0.659578094381681,0.0013607134490378203,99.5088443722052,0.574,101.125,2.4257058029972276,199.20909421899768],
[0.0260251193321132,0.03347490039769169,5.5348000553578916e-06,99.95078262706866,0.07,125.674,0.9872921870018642,4.8138061014812585],
[0.06840147058424716,0.10295941249521286,1.1278953284731719e-05,99.96437309968628,0.27,635.207,0.7852363298588435,3.1758344192083934],
[0.01460747891373856,0.031079824664837972,4.547945187203528e-07,99.99365842960907,0.176,2158.387,0.3563811547501974,0.2299408121550017]
]

ckpt_lm_simulation_data_60 = [
[10.797032557818994,8.940470333513822,2.012197508996352,94.33976201901754,24.911,298.932,1.2611811255465404,11362.628674813133],
[2.2410515180736685,1.297631095733777,0.09127632930351541,98.51810962783583,4.648,173.928,1.3726308572892547,2562.624200895355],
[0.5383159448554543,0.73103785960365,0.001514100341543444,99.4784004741192,0.647,101.774,2.4097561685286153,200.4266372979431],
[0.026091535599257476,0.03641006713923104,6.715112838250326e-06,99.94831836217016,0.076,125.997,0.9847559910048954,4.824917748240646],
[0.0686466927617834,0.09572394234156807,1.1660931006541947e-05,99.96582377380847,0.262,637.487,0.7822503572272018,3.187418897691116],
[0.014734746934260835,0.028365932431945646,4.4962639918821876e-07,99.99401734395663,0.174,2177.192,0.35324723715013356,0.23194829926716645]
]

ckpt_lm_simulation_data_50 = [
[11.064949466414124,14.370275498909285,1.3826463047204613,93.10509618044044,25.456,301.126,1.2402194129352766,11575.911616994752],
[3.6533030349501447,0.8919090788226638,0.2711836304890976,98.03908647414478,10.879,287.278,0.8726976596096501,3979.936067521977],
[0.6567464290611449,0.53618650892829,0.0032400275487448667,99.50756355132363,0.819,124.352,1.9779653112920361,244.042542106266],
[0.026722372358126,0.031750521592672304,5.5348000553571114e-06,99.95167090813258,0.07,129.041,0.9613353514558367,4.9421308001410855],
[0.06994475490420331,0.10175746452068228,1.1798867406076129e-05,99.96430150397603,0.274,649.54,0.7684704121353811,3.2474441543335293],
[0.015108328148085406,0.02957856931174214,4.573785784430795e-07,99.99379716898866,0.177,2232.392,0.3456362977934528,0.2378296719921319]
]

base_simulation_data = [base_simulation_data_100
                              ]

ckpt_lm_simulation_data = [ckpt_lm_simulation_data_150,
                           ckpt_lm_simulation_data_140,
                           ckpt_lm_simulation_data_130,
                           ckpt_lm_simulation_data_120,
                           ckpt_lm_simulation_data_110,
                           ckpt_lm_simulation_data_100,
                           ckpt_lm_simulation_data_90,
                            ckpt_lm_simulation_data_80,
                           ckpt_lm_simulation_data_70,
                              ckpt_lm_simulation_data_60,
                              ckpt_lm_simulation_data_50
                              ]

ckpt_simulation_data = [ckpt_simulation_data_150,
                        ckpt_simulation_data_140,
                        ckpt_simulation_data_130,
                        ckpt_simulation_data_120,
                        ckpt_simulation_data_110,
                        ckpt_simulation_data_100,
                        ckpt_simulation_data_90,
                        ckpt_simulation_data_80,
                        ckpt_simulation_data_70,
                        ckpt_simulation_data_60,
                        ckpt_simulation_data_50]

base_model_data = [ckpt_simulation_data_100,
              ckpt_lm_simulation_data_100]

model_data = [ckpt_simulation_data,
              ckpt_lm_simulation_data]

ckpt_time = []
recovery_time = []
recomputation_time = []

failure_percentages = ['+50', '+40', '+30', '+20', '+10', '0', '-10', '-20', '-30', '-40', '-50']
applications = ['CHIMERA', 'XGC', 'S3D', 'GYRO', 'POP', 'VULCAN']
col_list = ['Checkpoint time', 'Re-compuation waste time', 'Reovery time']
models = ['M2', 'M3']
colors = ['red', 'blue']

def data_clear():
    ckpt_time.clear()
    recomputation_time.clear()
    recovery_time.clear()


plt.rcParams.update({'font.size': 15, 'font.family':'Times New Roman'})

legend_elements_1 = [Line2D([0], [0], marker='o', label='Checkpoint', color='black'),
                     Line2D([0], [0], marker='v', label='Recomputation', color='black'),
                     Line2D([0], [0], marker='^', label='Recovery', color='black'),
                     Line2D([0], [0], color='red', label='P1'),
                     Line2D([0], [0], color='blue', label='P2')]

app_index = 0
for app in applications:
    model_index = 0
    axe = plt.subplot(111)
    #plt.subplots_adjust(hspace=0.01)
    model_index = 0
    for model in models:
        data_clear()
        failure_index = 0
        for failure_percentage in failure_percentages:
            ckpt_time.append(float(base_simulation_data_100[app_index][0] - model_data[model_index][failure_index][app_index][0]) / base_simulation_data_100[app_index][0] * 100)
            recomputation_time.append(float(base_simulation_data_100[app_index][1] - model_data[model_index][failure_index][app_index][1]) / base_simulation_data_100[app_index][1] * 100)
            recovery_time.append(float(base_simulation_data_100[app_index][2] - model_data[model_index][failure_index][app_index][2]) / base_simulation_data_100[app_index][2] * 100)
            failure_index += 1
        if app_index == 1 and model_index == 0:
            print(recomputation_time)
        l1, = axe.plot(failure_percentages, ckpt_time, 'o', color=colors[model_index], linestyle='solid', label = 'Checkpoint Overhead')
        l2, = axe.plot(failure_percentages, recomputation_time, 'v', color = colors[model_index], linestyle='solid', label = 'Recomputation Overhead')
        l3, = axe.plot(failure_percentages, recovery_time, '^', color= colors[model_index], linestyle='solid', label = 'Recovery Overhead')
        #axes.set_title('Model ' + models[model_index], x=0.5, y=0.25)
        model_index += 1
    axe.tick_params(axis='x', labelsize=18)
    axe.tick_params(axis='y', labelsize=18)
    axe.set_ylim(0, 150)
    axe.set_yticks([10, 20, 30, 40, 50, 60, 70, 80, 90, 100])
    legend_properties = {'size': '18', 'family': 'Times New Roman', 'weight': 'normal'}
    axe.legend(handles=legend_elements_1, loc='upper center', prop=legend_properties, ncol=2, borderaxespad=0, borderpad = 0.2)
    plt.xlabel('Failure Prediction Lead Time Change (percentage)', fontsize=18)
    plt.ylabel('Overhead Reduction (percentage)',  rotation='vertical', fontsize=18)
    plt.subplots_adjust(bottom=0.2)
    plt.savefig(str(applications[app_index]) +'_leadtime.png', dpi=400)
    plt.clf()
    app_index += 1

plt.rcParams.update({'font.size': 12, 'font.family':'Times New Roman'})



