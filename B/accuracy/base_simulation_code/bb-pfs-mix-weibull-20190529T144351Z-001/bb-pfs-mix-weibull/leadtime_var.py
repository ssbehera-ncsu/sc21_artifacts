import statistics
from operator import itemgetter
import numpy as np
import matplotlib.pyplot as plt
import glob
import seaborn as sns
import pickle
from dateutil import parser
import pandas as pd
from scipy.stats import lognorm
from scipy.stats import alpha
from scipy.stats import fisk
from scipy.stats import genextreme
from scipy.stats import gengamma
from scipy.stats import loglaplace
from scipy.stats import burr
from scipy.stats import maxwell
from scipy.stats import mielke
from scipy.stats import moyal
from scipy.stats import nakagami
from scipy.stats import norminvgauss
from scipy.stats import powerlognorm
from scipy.stats import wald
from scipy.stats import cauchy
from mpl_toolkits import mplot3d
from matplotlib.lines import Line2D


#col_list = ['computation time', 'checkpoint time', 'waste time', 'restart time', 'wallclock time', 'efficiency',
#             'no. of failures', 'no. of checkpoints', 'checkpoint interval', 'pct. of checkpoints to BB', 'daily write workloads to Burst Buffers']



base_simulation_data_100 = [[5.906209404579086,9.169600679330603,0.8012231111111773,95.78483165170321,24.647,619.183,0.5974565681487142,6348.5351930920315],
[1.9431917601784183,2.514602214460817,0.0844681249999373,98.14595607852272,11.225,586.831,0.42001124834491804,2133.2166093919986],
[0.7145523390407579,0.8592947044572643,0.003825777777755569,99.34803741205242,3.766,532.816,0.46285465266481707,264.43355455629785],
[0.035790711344789845,0.04227303928034483,0.004781746031745381,99.93110101908339,0.482,681.856,0.1808199748691967,6.648939751118924],
[0.09437956876001852,0.13500992141994228,0.01121737213402941,99.94991536763791,1.957,3457.777,0.14433690731534438,4.386674577592602],
[0.02253823625535016,0.04025842033704997,0.00031727419354092356,99.99123569748792,1.422,13138.434,0.058464721413464656,0.35492730442781606]]


ckpt_simulation_data_150 = [
[5.887293640487528,0.1064215686351758,0.849529904761973,98.13632087179539,26.133,616.94,0.5962957367572261,6318.553665271773],
[2.0600666087169888,0.032691450715277376,0.0870040499999363,99.10075355733942,11.562,593.362,0.41929120787835633,2175.8369694404378],
[0.723166038029704,0.008334260953906054,0.003963936507912886,99.6947881357607,3.902,535.41,0.4620566449064416,266.6292795512282],
[0.035770730254786554,0.0006651724624666279,0.004761904761904043,99.96570756907106,0.48,680.49,0.18135386120396144,6.637909578042962],
[0.09472134636984393,0.0026966593024929466,0.010861992945317095,99.97745123617192,1.895,3460.763,0.1442580284886939,4.391690960980604],
[0.02263134215943275,0.0020078470524219068,0.00032218279569127037,99.99653344810312,1.444,13143.523,0.05845861886174121,0.3550834805797852]
]

ckpt_simulation_data_140 = [
[5.873261874144895,0.10763122518757094,0.8361041269841941,98.14330312164,25.72,615.492,0.5977950804050319,6307.40878505415],
[2.0546623408100753,0.03287013332178989,0.08631927499993632,99.1031824210761,11.471,592.017,0.42049649061615796,2170.967185247565],
[0.7215122924170592,0.01092480321036259,0.003915174603151451,99.69443786367009,3.854,534.239,0.463343437490237,266.0328434152087],
[0.03575520746662157,0.0006437921585129696,0.004623015873015176,99.9658533868349,0.466,680.225,0.18146854632666456,6.635435931217426],
[0.09456229698708461,0.002644562651957183,0.010982363315687813,99.97747003070194,1.916,3454.82,0.14450766930190806,4.384167168988455],
[0.02261663040465767,0.0020453332934655837,0.00032976881719650386,99.99652923071719,1.478,13133.684,0.05847338700347654,0.35481774838186114]
]

ckpt_simulation_data_130 = [
[5.873662181727301,0.08433068349921018,0.8384121904762589,98.1488786910854,25.791,615.557,0.5975523001289254,6307.89143647839],
[2.0554541838403293,0.02863303450004561,0.08656759999993728,99.10447663294389,11.504,592.185,0.4202533083370906,2171.641559795818],
[0.7215091125752686,0.009323845810161603,0.003861333333310215,99.69511036291316,3.801,534.282,0.4631057864256468,266.06713025460454],
[0.03578517268089883,0.0006700710575228496,0.004801587301586643,99.96565816650384,0.484,680.759,0.18123308662426627,6.640607348214408],
[0.09450344815863423,0.00255432059948437,0.010541005290996804,99.97759309376954,1.839,3453.047,0.14461060957932118,4.381897270446113],
[0.022588616075028826,0.0019944639894415588,0.00032195967741181997,99.99654127828556,1.443,13118.548,0.058563678779703664,0.3544080007119231]
]

ckpt_simulation_data_120 = [
[5.876386256813839,0.09395962051190085,0.8356165079365734,98.14625236606126,25.705,615.836,0.59729205650524,6311.051386997079],
[1.9939267389440574,0.03522350234195664,0.0882230999999347,99.12629513250688,11.724,589.344,0.420045840976752,2149.6183466698926],
[0.7219704253732103,0.011512177457078169,0.0037953015872796533,99.69403967921193,3.736,534.697,0.46283699498455544,266.2737368894002],
[0.03580689850225242,0.0006656153222696639,0.004781746031745399,99.96566028409951,0.482,681.177,0.1811023185402277,6.64469960527571],
[0.09459831966282603,0.002627368306267166,0.01080467372133145,99.9775032686703,1.885,3456.296,0.1444504149283007,4.386011531498275],
[0.022596966051794856,0.0019545704930720984,0.0003128118279496791,99.99654692622033,1.402,13124.815,0.058543426481584525,0.3545776810362342]
]

ckpt_simulation_data_110 = [
[5.883655346128775,0.10267165182024729,0.8507001904762567,98.13795253867536,26.169,616.654,0.5964876438655697,6317.820475733927],
[1.9945610680003545,0.028986622854588563,0.08706424999993538,99.12904039339153,11.57,589.749,0.4196178283498852,2151.322141945283],
[0.7227616965333029,0.01009548031815413,0.003991365079341025,99.6942308983441,3.929,535.089,0.46240384909870297,266.45608514125814],
[0.03574058054615784,0.0006548412474466686,0.004692460317459632,99.96579861506594,0.473,679.932,0.18146383100826616,6.6325963682734494],
[0.09465338978966405,0.002588481294824141,0.010741622574947079,99.97751290432593,1.874,3458.364,0.14439923056401857,4.388663857139137],
[0.02264590055283293,0.0020213697748498955,0.0003259758064438164,99.996529024489,1.461,13151.327,0.0584073362043648,0.3552939695625623]
]

ckpt_simulation_data_100 = [
[5.865373628893035,5.229631830981899,0.8218981587302245,96.80116729210977,25.283,614.744,0.5987464528100058,6299.416690112582],
[1.9865257394693299,0.026777558228312192,0.085784999999937,99.13376677629999,11.4,587.707,0.42139522684413344,2143.9714398927113],
[0.7201272591518323,0.01082913459195932,0.003825777777755111,99.69508938042479,3.766,533.295,0.4643487711077172,265.56281400911524],
[0.035682317488653054,0.0006879833205796832,0.004890873015872291,99.96565463548143,0.493,678.779,0.18194208803718948,6.621316008145397],
[0.0945798912593951,0.0025985875708782968,0.010776014109338284,99.97751886485163,1.88,3455.641,0.1444216183642792,4.385217890898773],
[0.022658809948702414,0.0020669867257988245,0.00033356182794891566,99.99651984814072,1.495,13157.726,0.05831264393704112,0.35546630083306163]
]

ckpt_simulation_data_90 = [
[5.876626858698448,5.137637939790111,0.8286273015873716,96.82090236125028,25.49,615.904,0.5972397722407767,6312.143519643087],
[1.9423641072850077,0.025981797717271944,0.08600322499993422,99.15204683179148,11.429,586.041,0.4206805829766664,2129.782551976001],
[0.7211209885247658,0.011890135730258664,0.0038867301587073837,99.694201904304,3.826,533.963,0.46353796196800967,265.90450821758225],
[0.035727076291414,0.0010780629190059571,0.004861111111110396,99.96531855338124,0.49,679.644,0.18161890775349465,6.629689622794424],
[0.09457805922780373,0.0026965401526261447,0.01090784832450597,99.97747164101858,1.903,3455.463,0.14449692815065665,4.384943887024878],
[0.022614791449772204,0.0019649186629323804,0.0003163817204226913,99.99654251537595,1.418,13134.66,0.05847977388988661,0.3548438932375973]
]

ckpt_simulation_data_80 = [
[5.871504522042489,5.107119681480791,0.8202402539683217,96.83210668916942,25.232,615.469,0.5978844091920222,6308.234763964054],
[1.9418318640204373,0.02148123778973313,0.08728247499993551,99.15359657075264,11.599,586.052,0.4206455158617603,2129.664048662625],
[0.7212157630022173,0.01243586972508851,0.0038542222221986467,99.69395928547563,3.794,534.082,0.463492504125095,265.9542053940277],
[0.03577736438434597,0.0006753788743248835,0.004851190476189679,99.96561863695356,0.489,680.6,0.18129858753308561,6.639107214383727],
[0.09463495156004724,0.0025775104721866347,0.010672839506164067,99.97753343113467,1.862,3457.754,0.1443524777634956,4.387869980681863],
[0.022622265292444026,0.002014494598684156,0.0003244139784870026,99.99653348321036,1.454,13137.788,0.058458861545459,0.35492766869801173]
]

ckpt_simulation_data_70 =[
[5.883288840106383,9.132769379946877,0.8177046349207016,95.79560569042667,25.154,616.692,0.5964334874416833,6319.186701304632],
[1.9448332338012067,0.024062277634193108,0.08764367499993482,99.15115377438656,11.647,587.199,0.41975363016527417,2133.6103926141727],
[0.7227868222509937,0.009756897911307785,0.003958857142833737,99.69436039126218,3.897,535.144,0.46249633781023214,266.49486694602143],
[0.035845885368206334,0.0007163249125848338,0.005128968253967533,99.96529690096718,0.517,681.846,0.18093592797252944,6.651130866157808],
[0.09471531857105993,0.0026206553171896846,0.010443562610220532,99.97755545481134,1.822,3460.9,0.14424101613686435,4.391863699399917],
[0.02264724351656923,0.00197521970238366,0.00031905913977741486,99.99653620853182,1.43,13153.168,0.05839402199458774,0.3553436460903628]
]

ckpt_simulation_data_60 = [
[5.883389440996847,9.264981492788325,0.8227108571429222,95.76133780852197,25.308,616.738,0.5966682071984256,6319.593287105302],
[1.9438589106184676,0.022257134505617417,0.08714702499993486,99.15249589649798,11.581,586.934,0.4199525199916199,2132.8852637503164],
[0.7223859081119567,0.009296994922832992,0.00388266666664327,99.69475514323678,3.822,534.921,0.46270563345159127,266.37932571977404],
[0.035773243699031676,0.0006571726063848437,0.00455357142857076,99.96588486711347,0.459,680.585,0.1813251943663083,6.6389937716275655],
[0.09477637610027104,0.002652713932260836,0.011005291005281628,99.97741897825118,1.92,3462.638,0.14418066097591342,4.394090305610851],
[0.022655368427135517,0.002037358315568409,0.00032798387095996973,99.99652521080924,1.47,13156.539,0.05839165164348449,0.35543476280137837]
]

ckpt_simulation_data_50 = [
[5.870956181516585,9.0553268742243,0.7959568253968886,95.82414807737268,24.485,615.451,0.5980043057111071,6310.046775066304],
[1.9410395605084534,0.015910721947943785,0.08482932499993583,99.1572004922094,11.273,586.075,0.4206175009631156,2130.316619494055],
[0.7212620409633431,0.010892913799106303,0.003880634920612228,99.69456276914093,3.82,534.081,0.46346979075070477,265.9602871309768],
[0.0357310712035944,0.0006490540554517409,0.0044444444444437445,99.96601706864884,0.448,679.8,0.18156134500958868,6.631411138679006],
[0.09453982675949306,0.002574920980064058,0.010655643738968426,99.97755751094847,1.859,3454.279,0.144549196214085,4.383432444409549],
[0.022615463788811435,0.0020299886782739604,0.000327983870960024,99.99653177446986,1.47,13133.277,0.0584763914947295,0.35480644910850034]
]




ckpt_lm_simulation_data_150 = [
[0.11987583406960323,0.21560524004147308,0.0010077460317459916,99.91815662005739,0.031,12.462,15.656465505742604,279.19209993511527],
[0.055349065456596694,0.08683079689644892,0.00012792499999996209,99.94524587442555,0.017,16.508,11.298623729359102,84.0723461230465],
[0.025831256220778337,0.04146333153589559,4.063492063465901e-06,99.97380500149154,0.004,19.221,13.044318550868665,9.746671089101191],
[0.0014363679808253966,2.462128672526376e-06,2.9761904761901547e-05,99.99879726975492,0.003,27.342,4.6654194813541405,0.2604472513139331],
[0.0032689415476098134,1.5572226421198821e-06,2.2927689594361312e-05,99.9993172167743,0.004,119.643,4.161314245553211,0.15106998236567482],
[0.0008163498759352628,1.9755897267828003e-06,8.924731182560208e-07,99.9998863457283,0.004,475.166,1.5593636846979613,0.012817051634441448]
]

ckpt_lm_simulation_data_140 = [
[0.12089061638289653,0.2650792926581831,0.001300317460317377,99.90801336305323,0.04,12.598,15.685928570028468,276.85605744242037],
[0.05537961248629987,0.0477793409312383,7.52499999999543e-05,99.96093230254492,0.01,16.545,11.295536261157674,84.22965239406184],
[0.026017318874661948,0.04452495520254973,1.1174603174538333e-05,99.97184643589968,0.011,19.341,13.041029910904832,9.750055818301888],
[0.0014360428535621548,2.102445918255924e-06,2.976190476189977e-05,99.99879794000638,0.003,27.344,4.664552028846538,0.26050111685187805],
[0.003277964139364325,1.409444864350462e-06,2.2927689594325784e-05,99.99931537446813,0.004,119.903,4.155744544640058,0.15129827214973549],
[0.0008175136325545856,4.603759920668971e-06,1.338709677397021e-06,99.9998857631262,0.006,475.742,1.5576437837937216,0.012832977091536666]
]

ckpt_lm_simulation_data_130 = [
[0.12057738344246953,0.24070480698421498,0.0011377777777777389,99.91270551171519,0.035,12.552,15.664916161572476,277.56976818072917],
[0.05576977007705937,0.13752730422029652,0.00017307499999992437,99.92715433635833,0.023,16.63,11.305904442311563,84.26321661510693],
[0.025833828382756722,0.037516118293009486,6.095238095213062e-06,99.97529223663656,0.006,19.217,13.033108627069627,9.745713078117907],
[0.001435150521320736,0.0,0.0,99.99882426170737,0.0,27.327,4.663968097044383,0.2605538325244582],
[0.0032730488794319,2.6494641807488507e-06,2.8659611992928547e-05,99.99931493602784,0.005,119.733,4.15760117952733,0.15121062614172068],
[0.0008166746665041415,2.647999614229235e-06,8.924731182631263e-07,99.99988620841349,0.004,475.526,1.5583404319923972,0.012826623855790089]
]

ckpt_lm_simulation_data_120 = [
[3.979358012896839,0.09896813291087335,0.4424005079365281,98.76233160211473,13.609,417.121,0.8415601181572202,4535.515749867369],
[1.3723740135118496,0.02663728373758,0.04937904999996279,99.40095886742371,6.562,414.331,0.5915213224798356,1522.8727166673398],
[0.5125370658475519,0.006671748971417276,0.0022694603174467707,99.78348663669033,2.234,379.978,0.6519526646555066,189.28168526709604],
[0.025484722011216838,0.00038014841443836185,0.0027182539682535506,99.97621161087213,0.274,484.943,0.25504629121104794,4.728849935659851],
[0.06648627875682014,0.0014718973864911269,0.006081569664897991,99.9845816964575,1.061,2430.475,0.20569498393722183,3.083892589048784],
[0.015961139030179854,0.001149566182074298,0.0001856344085977929,99.99759796115974,0.832,9275.574,0.08248764720036214,0.25057972133124295]
]

ckpt_lm_simulation_data_110 = [
[3.9720004470884125,0.11029425982855476,0.4516327619047837,98.75881131378503,13.893,416.336,0.8430761000106504,4525.87632717531],
[1.3690063519464921,0.020610070081463577,0.047610674999965595,99.40554466550881,6.327,413.299,0.5926711983478646,1521.185145654805],
[0.5117768557789354,0.008802616558805836,0.002336507936494881,99.782890015824,2.3,379.349,0.6531988185406644,188.97764248521057],
[0.025512138697523907,0.000370619240547515,0.002599206349205995,99.9762970869823,0.262,485.494,0.25481503167972414,4.733746895235993],
[0.06632180642956446,0.0014327670807597066,0.00594973544973081,99.98465144360675,1.038,2424.545,0.20625800668199865,3.0764267084087114],
[0.01594307358393554,0.0010794941460123583,0.00017470161289902264,99.99761172087206,0.783,9266.852,0.08253189908856987,0.25034363645370944]
]

ckpt_lm_simulation_data_100 = [
[3.979748335101044,6.707896584909568,0.44266057142859383,97.01319752356395,13.617,417.168,0.8414736187933837,4534.817538658083],
[1.3709980361873142,0.02396027516290971,0.048904974999965094,99.4028184514417,6.499,413.937,0.5917938172901792,1522.7581954389952],
[0.5123668552550711,0.006048173976589149,0.00218107936506721,99.78385220783696,2.147,379.929,0.652213686550081,189.2235343551978],
[0.02555357633111458,0.00037506245106349776,0.002698412698412324,99.97617632164108,0.272,486.265,0.25431746491299284,4.741418773477559],
[0.06651452130320518,0.0016686070837992055,0.006173280423275427,99.98451572617167,1.077,2431.419,0.2055916448910843,3.0851044796505915],
[0.015983960027449725,0.0011481030865278395,0.0001854112903181423,99.9975950300583,0.831,9288.809,0.08232536293898803,0.25093634257730507]
]

ckpt_lm_simulation_data_90 = [
[5.829857542561485,5.175710109442806,0.8041813333333987,96.82913005795845,24.738,611.172,0.60197760377178,6265.013577641024],
[1.9291487947064943,0.02399767135457601,0.08617629999993576,99.15822534849028,11.452,582.516,0.423068999627025,2116.406167269984],
[0.7171112708863594,0.010087805344372296,0.003969015872992663,99.69657266240046,3.907,530.908,0.46607955279011565,264.3727893404096],
[0.03560063421478798,0.0008279202237289315,0.004652777777777147,99.96580413835247,0.469,677.272,0.1820635314889858,6.606601695165189],
[0.09396811499316664,0.0027355184943872795,0.011125661375652025,99.97754492064644,1.941,3432.925,0.14535651692761686,4.356372627224442],
[0.02246376372282185,0.001946221900642091,0.0003145967741861223,99.99656632999097,1.41,13046.893,0.05884653001117275,0.3524730232346258]
]

ckpt_lm_simulation_data_80 = [
[5.828020567855015,5.299096034540346,0.8191674920635567,96.79390841616517,25.199,610.986,0.6023856696419798,6262.2156208408815],
[1.925460369105091,0.019723567419496785,0.084596049999937,99.16210773659306,11.242,581.433,0.42422988934343375,2113.180517609787],
[0.7155358033396035,0.009632077281170347,0.0038643809523585776,99.69747005696463,3.804,529.822,0.46742333678635634,263.82598145588986],
[0.0354821506851763,0.000867087712066057,0.005029761904761216,99.96555691914459,0.507,674.941,0.1829399559567165,6.5837654932551715],
[0.093886341750543,0.002620092119333829,0.010850529100520272,99.97764341681656,1.893,3430.171,0.14555980305166957,4.352864542850989],
[0.02242694882714908,0.0019107307742173647,0.0003083494623584315,99.99657724397464,1.382,13026.422,0.0589854905927398,0.3519194430813203]
]

ckpt_lm_simulation_data_70 = [
[5.881771219915569,9.354412372599683,0.8213455238095929,95.73927626315856,25.266,616.621,0.5964230459877224,6316.613750381737],
[1.942154425116951,0.01798488275050751,0.08643967499993575,99.15523667509689,11.487,586.513,0.4201174586198556,2131.0835923799846],
[0.7216725234401623,0.00923024473118775,0.0038745396825165617,99.6950749238045,3.814,534.393,0.4629863941212019,266.1210798647284],
[0.035767900880901364,0.0006650934466841595,0.00478174603174532,99.96569306841067,0.482,680.432,0.18129924878429968,6.637446153366698],
[0.09471835048506921,0.002690477120078308,0.01115432098764559,99.97739226660775,1.946,3460.371,0.1442118503907284,4.391195818736249],
[0.022616518672697723,0.0020044799521011553,0.00032285215053017767,99.9965358893639,1.447,13134.677,0.058496723565292084,0.3548435777597088]
]

ckpt_lm_simulation_data_60 = [
[5.867386839559346,9.261441753625517,0.8086674285714921,95.76973268773204,24.876,615.113,0.5983127012497406,6304.870235035902],
[1.9406254785502526,0.023118614750731858,0.08728999999993452,99.15343181696664,11.6,586.056,0.4206265027314831,2129.4353694139786],
[0.7215816098249958,0.007917349389822442,0.003995428571404742,99.69561151613522,3.933,534.196,0.46343398140949155,266.019707352393],
[0.03578205892564273,0.0006912416794685731,0.00494047619047543,99.96552822250915,0.498,680.671,0.18128859646147366,6.639583363480467],
[0.09447688588433549,0.002611250485350231,0.010804673721331518,99.97753191017766,1.885,3451.842,0.14464990570595854,4.3803621386942115],
[0.022597342419411495,0.0019339659692232832,0.0003134811827882661,99.99654964020117,1.405,13124.932,0.05851127756578867,0.3545809753524451]
]

ckpt_lm_simulation_data_50 = [
[5.873768239067501,9.492701383265603,0.808114793650858,95.70988010748627,24.859,615.782,0.5975816393131628,6309.884143926006],
[1.941704972499653,0.018520146452207585,0.08662779999993574,99.15514951671881,11.512,586.382,0.42020774684550627,2131.0853920740446],
[0.7218217350279825,0.010899837581807775,0.003933460317436822,99.69429960928554,3.872,534.451,0.46299457890328555,266.14430107833704],
[0.03571281680187074,0.0007060039444673593,0.004910714285713555,99.96559773799758,0.495,679.358,0.18161606179566397,6.626946685752625],
[0.09461568684181088,0.0027402825488001357,0.011286155202812922,99.97737590369167,1.969,3456.519,0.14439962392763037,4.386285094553615],
[0.022603115343559018,0.0020031040446038774,0.0003239677419279032,99.99653778522993,1.452,13126.693,0.058521614621429886,0.3546280469643025]
]

base_simulation_data = [base_simulation_data_100
                              ]

ckpt_lm_simulation_data = [ckpt_lm_simulation_data_150,
                           ckpt_lm_simulation_data_140,
                           ckpt_lm_simulation_data_130,
                           ckpt_lm_simulation_data_120,
                           ckpt_lm_simulation_data_110,
                           ckpt_lm_simulation_data_100,
                           ckpt_lm_simulation_data_90,
                            ckpt_lm_simulation_data_80,
                           ckpt_lm_simulation_data_70,
                              ckpt_lm_simulation_data_60,
                              ckpt_lm_simulation_data_50
                              ]

ckpt_simulation_data = [ckpt_simulation_data_150,
                        ckpt_simulation_data_140,
                        ckpt_simulation_data_130,
                        ckpt_simulation_data_120,
                        ckpt_simulation_data_110,
                        ckpt_simulation_data_100,
                        ckpt_simulation_data_90,
                        ckpt_simulation_data_80,
                        ckpt_simulation_data_70,
                        ckpt_simulation_data_60,
                        ckpt_simulation_data_50]

base_model_data = [ckpt_simulation_data_100,
              ckpt_lm_simulation_data_100]

model_data = [ckpt_simulation_data,
              ckpt_lm_simulation_data]

ckpt_time = []
recovery_time = []
recomputation_time = []

failure_percentages = ['+50', '+40', '+30', '+20', '+10', '0', '-10', '-20', '-30', '-40', '-50']
applications = ['CHIMERA', 'XGC', 'S3D', 'GYRO', 'POP', 'VULCAN']
col_list = ['Checkpoint time', 'Re-compuation waste time', 'Reovery time']
models = ['M2', 'M3']
colors = ['red', 'blue']

def data_clear():
    ckpt_time.clear()
    recomputation_time.clear()
    recovery_time.clear()


plt.rcParams.update({'font.size': 15, 'font.family':'Times New Roman'})

legend_elements_1 = [Line2D([0], [0], marker='o', label='Checkpoint', color='black'),
                     Line2D([0], [0], marker='v', label='Recomputation', color='black'),
                     Line2D([0], [0], marker='^', label='Recovery', color='black'),
                     Line2D([0], [0], color='red', label='P1'),
                     Line2D([0], [0], color='blue', label='P2')]

app_index = 0
for app in applications:
    model_index = 0
    axe = plt.subplot(111)
    #plt.subplots_adjust(hspace=0.01)
    model_index = 0
    for model in models:
        data_clear()
        failure_index = 0
        for failure_percentage in failure_percentages:
            ckpt_time.append(float(base_simulation_data_100[app_index][0] - model_data[model_index][failure_index][app_index][0]) / base_simulation_data_100[app_index][0] * 100)
            recomputation_time.append(float(base_simulation_data_100[app_index][1] - model_data[model_index][failure_index][app_index][1]) / base_simulation_data_100[app_index][1] * 100)
            recovery_time.append(float(base_simulation_data_100[app_index][2] - model_data[model_index][failure_index][app_index][2]) / base_simulation_data_100[app_index][2] * 100)
            failure_index += 1
        if app_index == 1 and model_index == 0:
            print(recomputation_time)
        l1, = axe.plot(failure_percentages, ckpt_time, 'o', color=colors[model_index], linestyle='solid', label = 'Checkpoint Overhead')
        l2, = axe.plot(failure_percentages, recomputation_time, 'v', color = colors[model_index], linestyle='solid', label = 'Recomputation Overhead')
        l3, = axe.plot(failure_percentages, recovery_time, '^', color= colors[model_index], linestyle='solid', label = 'Recovery Overhead')
        #axes.set_title('Model ' + models[model_index], x=0.5, y=0.25)
        model_index += 1
    axe.tick_params(axis='x', labelsize=18)
    axe.tick_params(axis='y', labelsize=18)
    axe.set_ylim(0, 150)
    axe.set_yticks([10, 20, 30, 40, 50, 60, 70, 80, 90, 100])
    legend_properties = {'size': '18', 'family': 'Times New Roman', 'weight': 'normal'}
    axe.legend(handles=legend_elements_1, loc='upper center', prop=legend_properties, ncol=2, borderaxespad=0, borderpad = 0.2)
    plt.xlabel('Failure Prediction Lead Time Change (percentage)', fontsize=18)
    plt.ylabel('Overhead Reduction (percentage)',  rotation='vertical', fontsize=18)
    plt.subplots_adjust(bottom=0.2)
    plt.savefig(str(applications[app_index]) +'_leadtime.png', dpi=400)
    plt.clf()
    app_index += 1

plt.rcParams.update({'font.size': 12, 'font.family':'Times New Roman'})



